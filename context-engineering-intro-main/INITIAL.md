## FEATURE:

[Insert your feature here]

## EXAMPLES:

[Provide and explain examples that you have in the `examples/` folder]

## DOCUMENTATION:

[List out any documentation (web pages, sources for an MCP server like Crawl4AI RAG, etc.) that will need to be referenced during development]

## OTHER CONSIDERATIONS:

[Any other considerations or specific requirements - great place to include gotchas that you see AI coding assistants miss with your projects a lot]

# โครงสร้างสถาปัตยกรรม (Context Engineering) - Lotto Guide Generator

เอกสารนี้อธิบายสถาปัตยกรรมของโปรแกรม Lotto Guide Generator โดยเน้นที่การบำรุงรักษา (Maintenance) และการขยายระบบ (Scaling)

## 1. Core Context: สถาปัตยกรรมหลัก (Two-App Workflow)

หัวใจของแอปพลิเคชันนี้คือการแบ่งโปรแกรมออกเป็น 2 ส่วนอย่างชัดเจน เพื่อแยกความรับผิดชอบ

* **`main.py` (สำหรับลูกค้า):**
    * นี่คือเวอร์ชัน "คลีน" ที่ใช้สำหรับสร้าง `.exe` ส่งให้ผู้ใช้งานทั่วไป
    * **หน้าที่หลัก:** *อ่าน* ข้อมูลเทมเพลตและไฟล์ `.json` ที่กำหนดค่าไว้ แล้วนำมา *สร้าง* ภาพผลลัพธ์เท่านั้น
    * **ข้อดี (Maintenance):** ไฟล์ของลูกค้าจะมีขนาดเล็ก, เสถียร, และไม่มีโค้ดส่วนแก้ไขที่ซับซ้อน ทำให้ง่ายต่อการเผยแพร่และลดโอกาสเกิดบั๊กจากฝั่งผู้ใช้

* **`editor.py` (สำหรับนักพัฒนา):**
    * นี่คือเวอร์ชัน "นักพัฒนา" ที่คุณใช้เอง
    * **หน้าที่หลัก:** มัน *สืบทอด (Inherit)* ความสามารถทั้งหมดมาจาก `main.py` (`class AppWithEditor(LottoGuideApp)`) แล้ว "เพิ่ม" ปุ่มและหน้าต่างแก้ไขตำแหน่งเข้าไป
    * เมื่อคุณลากและบันทึกใน `editor.py` มันจะ *เขียน* หรือ *อัปเดต* ไฟล์ `.json` ในโฟลเดอร์ `configs/`
    * **ข้อดี (Maintenance):** คุณสามารถปรับแต่งตำแหน่งของเทมเพลตทั้งหมดได้โดยไม่ต้องแก้ไขโค้ด `main.py` เมื่อแก้ไขเสร็จ คุณเพียงแค่สร้าง `.exe` ใหม่จาก `main.py` ซึ่งจะดึง `.json` ที่อัปเดตแล้วไปใช้เองอัตโนมัติ

## 2. Content Context: การจัดการเนื้อหา (Templates & Configs)

การออกแบบนี้แยกเนื้อหาออกเป็น 3 ระดับ ทำให้ยืดหยุ่นสูง:

1.  **ไฟล์เทมเพลต (`templates/template_*.py`):**
    * เป็น "พิมพ์เขียว" หลัก
    * กำหนด **ภาพพื้นหลัง** (TEMPLATE_IMAGE), **ตำแหน่งเริ่มต้น** (POSITIONS), และ **ขนาดฟอนต์** (FONT_SIZES)
    * ไฟล์ `templates/__init__.py` ทำหน้าที่รวบรวมไฟล์เทมเพลตเหล่านี้มาสร้างเป็นลิสต์ `TEMPLATES` ให้ `main.py` เรียกใช้

2.  **ไฟล์ Config (`configs/*.json`):**
    * เป็น "พิมพ์เขียวที่แก้ไขแล้ว" (Overrides)
    * เมื่อคุณใช้ `editor.py` บันทึกตำแหน่งใหม่ มันจะถูกเก็บไว้ในไฟล์ `.json` ที่ชื่อตรงกับเทมเพลต (เช่น `configs/ชุดเต็ม.json`)
    * `main.py` จะพยายามอ่านไฟล์ `.json` นี้ก่อนเสมอ ถ้าเจอ, จะใช้ตำแหน่งจากไฟล์นี้แทนค่าเริ่มต้นใน `.py`

3.  **ไฟล์ข้อมูลหวย (`assets/lotto_list.txt`):**
    * **(สถานะปัจจุบัน)** นี่คือไฟล์ที่เก็บ "รายชื่อหวยทั้งหมด" ที่จะใช้สร้าง
    * `main.py` จะอ่านไฟล์นี้เพื่อสร้าง `CUSTOM_TITLES` และ `CLOSING_TIME`
    * **ปัญหา (Scaling):** ไฟล์นี้เป็นแบบ "Global" หมายความว่าทุกเทมเพลตที่ถูกเลือก จะต้องสร้างภาพสำหรับหวย "ทุกชื่อ" ในไฟล์นี้ ซึ่งไม่ยืดหยุ่นหากเทมเพลตหนึ่งต้องการสร้าง 10 หวย แต่อีกเทมเพลตต้องการสร้าง 50 หวย

## 3. Execution Context: โฟลว์การทำงาน (ปัจจุบัน)

ลำดับการทำงาน (Loop) ปัจจุบันใน `main.py` (`_run_worker`) คือ:

1.  วนลูป **รายชื่อหวย** (จาก `lotto_list.txt`)
2.  ข้างในลูปนั้น, วนลูป **เทมเพลตที่ถูกเลือก**
3.  **ผลลัพธ์:** (Template A - หวย 1), (Template B - หวย 1), (Template A - หวย 2), (Template B - หวย 2), ...

## 4. Scaling Context: แนวทางการขยายและบำรุงรักษา (ตาม Prompt)

ไฟล์ `prompt ล่าสุด-141168-21_30น.txt` ได้ระบุแนวทางที่ชัดเจนในการแก้ปัญหา "Global" ในข้อ 2.3 เพื่อให้ระบบขยายและบำรุงรักษาง่ายขึ้น

* **การเปลี่ยนแปลง (Decoupling):**
    1.  **เลิกใช้ `assets/lotto_list.txt`**
    2.  ย้ายรายชื่อหวย (`LOTTO_TITLES = [...]`) เข้าไปไว้ในไฟล์ `template_*.py` ของแต่ละเทมเพลตแทน
    3.  `templates/__init__.py` จะถูกแก้ไขให้อ่าน `LOTTO_TITLES` นี้เข้าไปใน `TEMPLATES` ด้วย

* **โฟลว์การทำงานใหม่ (ที่ Prompt แนะนำ):**
    1.  วนลูป **เทมเพลตที่ถูกเลือก** ก่อน
    2.  ข้างในลูปนั้น, วนลูป **`LOTTO_TITLES` เฉพาะของเทมเพลตนั้นๆ**
    3.  **ผลลัพธ์:** (Template A - หวย 1A), (Template A - หวย 2A), ... , (Template B - หวย 1B), (Template B - หวย 2B), ...

* **ข้อดี (Scaling):**
    * เทมเพลตแต่ละอันเป็นอิสระต่อกัน (Decoupled)
    * `Template A` (เช่น เม็ดเดียว) สามารถกำหนดให้สร้างเฉพาะหวยที่จำเป็น 2-3 ชื่อได้
    * `Template B` (เช่น ชุดเต็ม) สามารถกำหนดให้สร้าง 50 หวยได้
    * การคำนวณ Progress Bar จะแม่นยำขึ้น (คำนวณจากผลรวมของหวยในเทมเพลตที่เลือกเท่านั้น)
    * **นี่คือสถาปัตยกรรมที่ยั่งยืนและง่ายต่อการขยายหรือเพิ่มเทมเพลตใหม่ๆ ในอนาคต**